"use strict";class Platform extends PIXI.Sprite{static platforms=[];constructor(t,i,s,e,o,r,h,a,l,m){super(t),this.width=i,this.height=s,this.position.set(e,o),this.original_y=o,this.min_x=r,this.max_x=h,this.original_speed=a,this.speed=a,this.hidden=l,this.movable=m,Platform.platforms.push(this),stage.addChild(this),this.directionChangeTimeout=setTimeout((()=>{}),1),this.platform_ticker=createTicker(this.showAnimation.bind(this),62),this.hidden?this.position.set(e,app.screen.height):this.show()}static isPlayerOnPlatform(){if(player.x>4e3)return!0;for(let t=0;t<Platform.platforms.length;t++){const i=player.x+player.width/2>=Platform.platforms[t].x,s=player.x+player.width/2<=Platform.platforms[t].x+Platform.platforms[t].width;if(i&&s)return Platform.platforms[t].stopPlatform(),!0}return!1}static showNextPlatform(){for(let t=0;t<Platform.platforms.length;t++){const i=player.x+player.width/2>=Platform.platforms[t].x,s=player.x+player.width/2<=Platform.platforms[t].x+Platform.platforms[t].width;i&&s&&t+1<Platform.platforms.length&&Platform.platforms[t+1].show()}}show(){this.platform_ticker.started||this.platform_ticker.start()}showAnimation(){this.position.set(this.x,this.y-(this.y-this.original_y)/15|0),this.y<=this.original_y&&(this.position.set(this.x,this.original_y),this.platform_ticker.stop(),this.platform_ticker=createTicker(this.movePlatform.bind(this),62),this.movable&&this.platform_ticker.start())}movePlatform(){this.position.set(this.x+this.speed,app.screen.height-150),this.x<=this.min_x&&0!=this.speed?(this.speed=0,this.directionChangeTimeout=setTimeout((()=>this.speed=this.original_speed),300)):this.x>=this.max_x&&0!=this.speed&&(this.speed=0,this.directionChangeTimeout=setTimeout((()=>this.speed=-this.original_speed),300))}stopPlatform(){this.speed=0,this.platform_ticker.stop(),clearTimeout(this.directionChangeTimeout)}}